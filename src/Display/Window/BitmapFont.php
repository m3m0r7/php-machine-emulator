<?php

declare(strict_types=1);

namespace PHPMachineEmulator\Display\Window;

/**
 * IBM BIOS 8x8 bitmap font with full CP437 support.
 *
 * This is the authentic IBM PC BIOS font used in text mode.
 * All 256 characters of Code Page 437 are supported.
 */
class BitmapFont
{
    protected static ?array $glyphs = null;

    /** @var array<string, array<array{0: int, 1: int}>> Pre-computed pixel positions for each glyph */
    protected static array $glyphPixelsCache = [];

    /** @var array<string, int> Cached pixel counts per glyph */
    protected static array $glyphPixelCountCache = [];

    /**
     * Get glyph for a character.
     * Accepts both single-byte string and direct byte value lookup.
     */
    public static function getGlyph(string $char): ?array
    {
        $byte = ord($char);
        return self::glyphs()[$byte] ?? null;
    }

    /**
     * Get glyph by CP437 byte value directly.
     */
    public static function getGlyphByCode(int $code): ?array
    {
        return self::glyphs()[$code] ?? null;
    }

    /**
     * Get pre-computed pixel positions for a glyph (relative to top-left).
     * Returns array of [x, y] positions where pixels should be drawn.
     * @return array<array{0: int, 1: int}>|null
     */
    public static function getGlyphPixels(string $char): ?array
    {
        if (isset(self::$glyphPixelsCache[$char])) {
            return self::$glyphPixelsCache[$char];
        }

        $glyph = self::getGlyph($char);
        if ($glyph === null) {
            return null;
        }

        $pixels = [];
        for ($row = 0; $row < 8; $row++) {
            $rowData = $glyph[$row];
            if ($rowData === 0) {
                continue; // Skip empty rows
            }
            for ($col = 0; $col < 8; $col++) {
                if ($rowData & (0x80 >> $col)) {
                    $pixels[] = [$col, $row];
                }
            }
        }

        self::$glyphPixelsCache[$char] = $pixels;
        self::$glyphPixelCountCache[$char] = count($pixels);
        return $pixels;
    }

    /**
     * Get pre-computed pixel positions by CP437 byte value.
     * @return array<array{0: int, 1: int}>|null
     */
    public static function getGlyphPixelsByCode(int $code): ?array
    {
        $key = chr($code);
        if (isset(self::$glyphPixelsCache[$key])) {
            return self::$glyphPixelsCache[$key];
        }

        $glyph = self::getGlyphByCode($code);
        if ($glyph === null) {
            return null;
        }

        $pixels = [];
        for ($row = 0; $row < 8; $row++) {
            $rowData = $glyph[$row];
            if ($rowData === 0) {
                continue;
            }
            for ($col = 0; $col < 8; $col++) {
                if ($rowData & (0x80 >> $col)) {
                    $pixels[] = [$col, $row];
                }
            }
        }

        self::$glyphPixelsCache[$key] = $pixels;
        self::$glyphPixelCountCache[$key] = count($pixels);
        return $pixels;
    }

    /**
     * Get cached pixel count for a glyph (avoids count() call).
     */
    public static function getGlyphPixelCount(string $char): int
    {
        if (isset(self::$glyphPixelCountCache[$char])) {
            return self::$glyphPixelCountCache[$char];
        }
        // Trigger cache population
        $pixels = self::getGlyphPixels($char);
        return $pixels !== null ? self::$glyphPixelCountCache[$char] : 0;
    }

    /**
     * IBM BIOS 8x8 font - Complete CP437 character set (256 characters).
     * Index is the byte value (0x00-0xFF).
     */
    public static function glyphs(): array
    {
        return self::$glyphs ??= [
            // 0x00-0x0F: Control characters with graphics
            0x00 => [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], // NUL (blank)
            0x01 => [0x7E, 0x81, 0xA5, 0x81, 0xBD, 0x99, 0x81, 0x7E], // ☺ (smiley)
            0x02 => [0x7E, 0xFF, 0xDB, 0xFF, 0xC3, 0xE7, 0xFF, 0x7E], // ☻ (smiley inverse)
            0x03 => [0x6C, 0xFE, 0xFE, 0xFE, 0x7C, 0x38, 0x10, 0x00], // ♥ (heart)
            0x04 => [0x10, 0x38, 0x7C, 0xFE, 0x7C, 0x38, 0x10, 0x00], // ♦ (diamond)
            0x05 => [0x38, 0x7C, 0x38, 0xFE, 0xFE, 0x7C, 0x38, 0x7C], // ♣ (club)
            0x06 => [0x10, 0x10, 0x38, 0x7C, 0xFE, 0x7C, 0x38, 0x7C], // ♠ (spade)
            0x07 => [0x00, 0x00, 0x18, 0x3C, 0x3C, 0x18, 0x00, 0x00], // • (bullet)
            0x08 => [0xFF, 0xFF, 0xE7, 0xC3, 0xC3, 0xE7, 0xFF, 0xFF], // ◘ (inverse bullet)
            0x09 => [0x00, 0x3C, 0x66, 0x42, 0x42, 0x66, 0x3C, 0x00], // ○ (circle)
            0x0A => [0xFF, 0xC3, 0x99, 0xBD, 0xBD, 0x99, 0xC3, 0xFF], // ◙ (inverse circle)
            0x0B => [0x0F, 0x07, 0x0F, 0x7D, 0xCC, 0xCC, 0xCC, 0x78], // ♂ (male)
            0x0C => [0x3C, 0x66, 0x66, 0x66, 0x3C, 0x18, 0x7E, 0x18], // ♀ (female)
            0x0D => [0x3F, 0x33, 0x3F, 0x30, 0x30, 0x70, 0xF0, 0xE0], // ♪ (note)
            0x0E => [0x7F, 0x63, 0x7F, 0x63, 0x63, 0x67, 0xE6, 0xC0], // ♫ (notes)
            0x0F => [0x99, 0x5A, 0x3C, 0xE7, 0xE7, 0x3C, 0x5A, 0x99], // ☼ (sun)

            // 0x10-0x1F: More control character graphics
            0x10 => [0x80, 0xE0, 0xF8, 0xFE, 0xF8, 0xE0, 0x80, 0x00], // ► (right triangle)
            0x11 => [0x02, 0x0E, 0x3E, 0xFE, 0x3E, 0x0E, 0x02, 0x00], // ◄ (left triangle)
            0x12 => [0x18, 0x3C, 0x7E, 0x18, 0x18, 0x7E, 0x3C, 0x18], // ↕ (up-down arrow)
            0x13 => [0x66, 0x66, 0x66, 0x66, 0x66, 0x00, 0x66, 0x00], // ‼ (double exclamation)
            0x14 => [0x7F, 0xDB, 0xDB, 0x7B, 0x1B, 0x1B, 0x1B, 0x00], // ¶ (paragraph)
            0x15 => [0x3E, 0x63, 0x38, 0x6C, 0x6C, 0x38, 0xCC, 0x78], // § (section)
            0x16 => [0x00, 0x00, 0x00, 0x00, 0x7E, 0x7E, 0x7E, 0x00], // ▬ (rectangle)
            0x17 => [0x18, 0x3C, 0x7E, 0x18, 0x7E, 0x3C, 0x18, 0xFF], // ↨ (up-down arrow with base)
            0x18 => [0x18, 0x3C, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x00], // ↑ (up arrow)
            0x19 => [0x18, 0x18, 0x18, 0x18, 0x7E, 0x3C, 0x18, 0x00], // ↓ (down arrow)
            0x1A => [0x00, 0x18, 0x0C, 0xFE, 0x0C, 0x18, 0x00, 0x00], // → (right arrow)
            0x1B => [0x00, 0x30, 0x60, 0xFE, 0x60, 0x30, 0x00, 0x00], // ← (left arrow)
            0x1C => [0x00, 0x00, 0xC0, 0xC0, 0xC0, 0xFE, 0x00, 0x00], // ∟ (right angle)
            0x1D => [0x00, 0x24, 0x66, 0xFF, 0x66, 0x24, 0x00, 0x00], // ↔ (left-right arrow)
            0x1E => [0x00, 0x18, 0x3C, 0x7E, 0xFF, 0xFF, 0x00, 0x00], // ▲ (up triangle)
            0x1F => [0x00, 0xFF, 0xFF, 0x7E, 0x3C, 0x18, 0x00, 0x00], // ▼ (down triangle)

            // 0x20-0x2F: Punctuation and numbers
            0x20 => [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], // (space)
            0x21 => [0x30, 0x78, 0x78, 0x30, 0x30, 0x00, 0x30, 0x00], // !
            0x22 => [0x6C, 0x6C, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00], // "
            0x23 => [0x6C, 0x6C, 0xFE, 0x6C, 0xFE, 0x6C, 0x6C, 0x00], // #
            0x24 => [0x30, 0x7C, 0xC0, 0x78, 0x0C, 0xF8, 0x30, 0x00], // $
            0x25 => [0x00, 0xC6, 0xCC, 0x18, 0x30, 0x66, 0xC6, 0x00], // %
            0x26 => [0x38, 0x6C, 0x38, 0x76, 0xDC, 0xCC, 0x76, 0x00], // &
            0x27 => [0x60, 0x60, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00], // '
            0x28 => [0x18, 0x30, 0x60, 0x60, 0x60, 0x30, 0x18, 0x00], // (
            0x29 => [0x60, 0x30, 0x18, 0x18, 0x18, 0x30, 0x60, 0x00], // )
            0x2A => [0x00, 0x66, 0x3C, 0xFF, 0x3C, 0x66, 0x00, 0x00], // *
            0x2B => [0x00, 0x30, 0x30, 0xFC, 0x30, 0x30, 0x00, 0x00], // +
            0x2C => [0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x60], // ,
            0x2D => [0x00, 0x00, 0x00, 0xFC, 0x00, 0x00, 0x00, 0x00], // -
            0x2E => [0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00], // .
            0x2F => [0x06, 0x0C, 0x18, 0x30, 0x60, 0xC0, 0x80, 0x00], // /

            // 0x30-0x3F: Numbers and punctuation
            0x30 => [0x7C, 0xC6, 0xCE, 0xDE, 0xF6, 0xE6, 0x7C, 0x00], // 0
            0x31 => [0x30, 0x70, 0x30, 0x30, 0x30, 0x30, 0xFC, 0x00], // 1
            0x32 => [0x78, 0xCC, 0x0C, 0x38, 0x60, 0xCC, 0xFC, 0x00], // 2
            0x33 => [0x78, 0xCC, 0x0C, 0x38, 0x0C, 0xCC, 0x78, 0x00], // 3
            0x34 => [0x1C, 0x3C, 0x6C, 0xCC, 0xFE, 0x0C, 0x1E, 0x00], // 4
            0x35 => [0xFC, 0xC0, 0xF8, 0x0C, 0x0C, 0xCC, 0x78, 0x00], // 5
            0x36 => [0x38, 0x60, 0xC0, 0xF8, 0xCC, 0xCC, 0x78, 0x00], // 6
            0x37 => [0xFC, 0xCC, 0x0C, 0x18, 0x30, 0x30, 0x30, 0x00], // 7
            0x38 => [0x78, 0xCC, 0xCC, 0x78, 0xCC, 0xCC, 0x78, 0x00], // 8
            0x39 => [0x78, 0xCC, 0xCC, 0x7C, 0x0C, 0x18, 0x70, 0x00], // 9
            0x3A => [0x00, 0x30, 0x30, 0x00, 0x00, 0x30, 0x30, 0x00], // :
            0x3B => [0x00, 0x30, 0x30, 0x00, 0x00, 0x30, 0x30, 0x60], // ;
            0x3C => [0x18, 0x30, 0x60, 0xC0, 0x60, 0x30, 0x18, 0x00], // <
            0x3D => [0x00, 0x00, 0xFC, 0x00, 0x00, 0xFC, 0x00, 0x00], // =
            0x3E => [0x60, 0x30, 0x18, 0x0C, 0x18, 0x30, 0x60, 0x00], // >
            0x3F => [0x78, 0xCC, 0x0C, 0x18, 0x30, 0x00, 0x30, 0x00], // ?

            // 0x40-0x5F: Uppercase letters
            0x40 => [0x7C, 0xC6, 0xDE, 0xDE, 0xDE, 0xC0, 0x78, 0x00], // @
            0x41 => [0x30, 0x78, 0xCC, 0xCC, 0xFC, 0xCC, 0xCC, 0x00], // A
            0x42 => [0xFC, 0x66, 0x66, 0x7C, 0x66, 0x66, 0xFC, 0x00], // B
            0x43 => [0x3C, 0x66, 0xC0, 0xC0, 0xC0, 0x66, 0x3C, 0x00], // C
            0x44 => [0xF8, 0x6C, 0x66, 0x66, 0x66, 0x6C, 0xF8, 0x00], // D
            0x45 => [0xFE, 0x62, 0x68, 0x78, 0x68, 0x62, 0xFE, 0x00], // E
            0x46 => [0xFE, 0x62, 0x68, 0x78, 0x68, 0x60, 0xF0, 0x00], // F
            0x47 => [0x3C, 0x66, 0xC0, 0xC0, 0xCE, 0x66, 0x3E, 0x00], // G
            0x48 => [0xCC, 0xCC, 0xCC, 0xFC, 0xCC, 0xCC, 0xCC, 0x00], // H
            0x49 => [0x78, 0x30, 0x30, 0x30, 0x30, 0x30, 0x78, 0x00], // I
            0x4A => [0x1E, 0x0C, 0x0C, 0x0C, 0xCC, 0xCC, 0x78, 0x00], // J
            0x4B => [0xE6, 0x66, 0x6C, 0x78, 0x6C, 0x66, 0xE6, 0x00], // K
            0x4C => [0xF0, 0x60, 0x60, 0x60, 0x62, 0x66, 0xFE, 0x00], // L
            0x4D => [0xC6, 0xEE, 0xFE, 0xFE, 0xD6, 0xC6, 0xC6, 0x00], // M
            0x4E => [0xC6, 0xE6, 0xF6, 0xDE, 0xCE, 0xC6, 0xC6, 0x00], // N
            0x4F => [0x38, 0x6C, 0xC6, 0xC6, 0xC6, 0x6C, 0x38, 0x00], // O
            0x50 => [0xFC, 0x66, 0x66, 0x7C, 0x60, 0x60, 0xF0, 0x00], // P
            0x51 => [0x78, 0xCC, 0xCC, 0xCC, 0xDC, 0x78, 0x1C, 0x00], // Q
            0x52 => [0xFC, 0x66, 0x66, 0x7C, 0x6C, 0x66, 0xE6, 0x00], // R
            0x53 => [0x78, 0xCC, 0xE0, 0x70, 0x1C, 0xCC, 0x78, 0x00], // S
            0x54 => [0xFC, 0xB4, 0x30, 0x30, 0x30, 0x30, 0x78, 0x00], // T
            0x55 => [0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0xFC, 0x00], // U
            0x56 => [0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0x78, 0x30, 0x00], // V
            0x57 => [0xC6, 0xC6, 0xC6, 0xD6, 0xFE, 0xEE, 0xC6, 0x00], // W
            0x58 => [0xC6, 0xC6, 0x6C, 0x38, 0x38, 0x6C, 0xC6, 0x00], // X
            0x59 => [0xCC, 0xCC, 0xCC, 0x78, 0x30, 0x30, 0x78, 0x00], // Y
            0x5A => [0xFE, 0xC6, 0x8C, 0x18, 0x32, 0x66, 0xFE, 0x00], // Z
            0x5B => [0x78, 0x60, 0x60, 0x60, 0x60, 0x60, 0x78, 0x00], // [
            0x5C => [0xC0, 0x60, 0x30, 0x18, 0x0C, 0x06, 0x02, 0x00], // \
            0x5D => [0x78, 0x18, 0x18, 0x18, 0x18, 0x18, 0x78, 0x00], // ]
            0x5E => [0x10, 0x38, 0x6C, 0xC6, 0x00, 0x00, 0x00, 0x00], // ^
            0x5F => [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF], // _

            // 0x60-0x7F: Lowercase letters
            0x60 => [0x30, 0x30, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00], // `
            0x61 => [0x00, 0x00, 0x78, 0x0C, 0x7C, 0xCC, 0x76, 0x00], // a
            0x62 => [0xE0, 0x60, 0x60, 0x7C, 0x66, 0x66, 0xDC, 0x00], // b
            0x63 => [0x00, 0x00, 0x78, 0xCC, 0xC0, 0xCC, 0x78, 0x00], // c
            0x64 => [0x1C, 0x0C, 0x0C, 0x7C, 0xCC, 0xCC, 0x76, 0x00], // d
            0x65 => [0x00, 0x00, 0x78, 0xCC, 0xFC, 0xC0, 0x78, 0x00], // e
            0x66 => [0x38, 0x6C, 0x60, 0xF0, 0x60, 0x60, 0xF0, 0x00], // f
            0x67 => [0x00, 0x00, 0x76, 0xCC, 0xCC, 0x7C, 0x0C, 0xF8], // g
            0x68 => [0xE0, 0x60, 0x6C, 0x76, 0x66, 0x66, 0xE6, 0x00], // h
            0x69 => [0x30, 0x00, 0x70, 0x30, 0x30, 0x30, 0x78, 0x00], // i
            0x6A => [0x0C, 0x00, 0x0C, 0x0C, 0x0C, 0xCC, 0xCC, 0x78], // j
            0x6B => [0xE0, 0x60, 0x66, 0x6C, 0x78, 0x6C, 0xE6, 0x00], // k
            0x6C => [0x70, 0x30, 0x30, 0x30, 0x30, 0x30, 0x78, 0x00], // l
            0x6D => [0x00, 0x00, 0xCC, 0xFE, 0xFE, 0xD6, 0xC6, 0x00], // m
            0x6E => [0x00, 0x00, 0xF8, 0xCC, 0xCC, 0xCC, 0xCC, 0x00], // n
            0x6F => [0x00, 0x00, 0x78, 0xCC, 0xCC, 0xCC, 0x78, 0x00], // o
            0x70 => [0x00, 0x00, 0xDC, 0x66, 0x66, 0x7C, 0x60, 0xF0], // p
            0x71 => [0x00, 0x00, 0x76, 0xCC, 0xCC, 0x7C, 0x0C, 0x1E], // q
            0x72 => [0x00, 0x00, 0xDC, 0x76, 0x66, 0x60, 0xF0, 0x00], // r
            0x73 => [0x00, 0x00, 0x7C, 0xC0, 0x78, 0x0C, 0xF8, 0x00], // s
            0x74 => [0x10, 0x30, 0x7C, 0x30, 0x30, 0x34, 0x18, 0x00], // t
            0x75 => [0x00, 0x00, 0xCC, 0xCC, 0xCC, 0xCC, 0x76, 0x00], // u
            0x76 => [0x00, 0x00, 0xCC, 0xCC, 0xCC, 0x78, 0x30, 0x00], // v
            0x77 => [0x00, 0x00, 0xC6, 0xD6, 0xFE, 0xFE, 0x6C, 0x00], // w
            0x78 => [0x00, 0x00, 0xC6, 0x6C, 0x38, 0x6C, 0xC6, 0x00], // x
            0x79 => [0x00, 0x00, 0xCC, 0xCC, 0xCC, 0x7C, 0x0C, 0xF8], // y
            0x7A => [0x00, 0x00, 0xFC, 0x98, 0x30, 0x64, 0xFC, 0x00], // z
            0x7B => [0x1C, 0x30, 0x30, 0xE0, 0x30, 0x30, 0x1C, 0x00], // {
            0x7C => [0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x00], // |
            0x7D => [0xE0, 0x30, 0x30, 0x1C, 0x30, 0x30, 0xE0, 0x00], // }
            0x7E => [0x76, 0xDC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], // ~
            0x7F => [0x00, 0x10, 0x38, 0x6C, 0xC6, 0xC6, 0xFE, 0x00], // ⌂ (house)

            // 0x80-0x8F: International characters
            0x80 => [0x78, 0xCC, 0xC0, 0xCC, 0x78, 0x18, 0x0C, 0x78], // Ç
            0x81 => [0x00, 0xCC, 0x00, 0xCC, 0xCC, 0xCC, 0x7E, 0x00], // ü
            0x82 => [0x1C, 0x00, 0x78, 0xCC, 0xFC, 0xC0, 0x78, 0x00], // é
            0x83 => [0x7E, 0xC3, 0x3C, 0x06, 0x3E, 0x66, 0x3F, 0x00], // â
            0x84 => [0xCC, 0x00, 0x78, 0x0C, 0x7C, 0xCC, 0x7E, 0x00], // ä
            0x85 => [0xE0, 0x00, 0x78, 0x0C, 0x7C, 0xCC, 0x7E, 0x00], // à
            0x86 => [0x30, 0x30, 0x78, 0x0C, 0x7C, 0xCC, 0x7E, 0x00], // å
            0x87 => [0x00, 0x00, 0x78, 0xC0, 0xC0, 0x78, 0x0C, 0x38], // ç
            0x88 => [0x7E, 0xC3, 0x3C, 0x66, 0x7E, 0x60, 0x3C, 0x00], // ê
            0x89 => [0xCC, 0x00, 0x78, 0xCC, 0xFC, 0xC0, 0x78, 0x00], // ë
            0x8A => [0xE0, 0x00, 0x78, 0xCC, 0xFC, 0xC0, 0x78, 0x00], // è
            0x8B => [0xCC, 0x00, 0x70, 0x30, 0x30, 0x30, 0x78, 0x00], // ï
            0x8C => [0x7C, 0xC6, 0x38, 0x18, 0x18, 0x18, 0x3C, 0x00], // î
            0x8D => [0xE0, 0x00, 0x70, 0x30, 0x30, 0x30, 0x78, 0x00], // ì
            0x8E => [0xC6, 0x38, 0x6C, 0xC6, 0xFE, 0xC6, 0xC6, 0x00], // Ä
            0x8F => [0x30, 0x30, 0x00, 0x78, 0xCC, 0xFC, 0xCC, 0x00], // Å

            // 0x90-0x9F: More international characters
            0x90 => [0x1C, 0x00, 0xFC, 0x60, 0x78, 0x60, 0xFC, 0x00], // É
            0x91 => [0x00, 0x00, 0x7F, 0x0C, 0x7F, 0xCC, 0x7F, 0x00], // æ
            0x92 => [0x3E, 0x6C, 0xCC, 0xFE, 0xCC, 0xCC, 0xCE, 0x00], // Æ
            0x93 => [0x78, 0xCC, 0x00, 0x78, 0xCC, 0xCC, 0x78, 0x00], // ô
            0x94 => [0x00, 0xCC, 0x00, 0x78, 0xCC, 0xCC, 0x78, 0x00], // ö
            0x95 => [0x00, 0xE0, 0x00, 0x78, 0xCC, 0xCC, 0x78, 0x00], // ò
            0x96 => [0x78, 0xCC, 0x00, 0xCC, 0xCC, 0xCC, 0x7E, 0x00], // û
            0x97 => [0x00, 0xE0, 0x00, 0xCC, 0xCC, 0xCC, 0x7E, 0x00], // ù
            0x98 => [0x00, 0xCC, 0x00, 0xCC, 0xCC, 0x7C, 0x0C, 0xF8], // ÿ
            0x99 => [0xC3, 0x18, 0x3C, 0x66, 0x66, 0x3C, 0x18, 0x00], // Ö
            0x9A => [0x00, 0xCC, 0x00, 0xCC, 0xCC, 0xCC, 0x78, 0x00], // Ü
            0x9B => [0x18, 0x18, 0x7E, 0xC0, 0xC0, 0x7E, 0x18, 0x18], // ¢
            0x9C => [0x38, 0x6C, 0x64, 0xF0, 0x60, 0xE6, 0xFC, 0x00], // £
            0x9D => [0xCC, 0xCC, 0x78, 0xFC, 0x30, 0xFC, 0x30, 0x30], // ¥
            0x9E => [0xF8, 0xCC, 0xCC, 0xFA, 0xC6, 0xCF, 0xC6, 0xC7], // ₧
            0x9F => [0x0E, 0x1B, 0x18, 0x3C, 0x18, 0x18, 0xD8, 0x70], // ƒ

            // 0xA0-0xAF: More accented characters and symbols
            0xA0 => [0x1C, 0x00, 0x78, 0x0C, 0x7C, 0xCC, 0x7E, 0x00], // á
            0xA1 => [0x38, 0x00, 0x70, 0x30, 0x30, 0x30, 0x78, 0x00], // í
            0xA2 => [0x00, 0x1C, 0x00, 0x78, 0xCC, 0xCC, 0x78, 0x00], // ó
            0xA3 => [0x00, 0x1C, 0x00, 0xCC, 0xCC, 0xCC, 0x7E, 0x00], // ú
            0xA4 => [0x00, 0xF8, 0x00, 0xF8, 0xCC, 0xCC, 0xCC, 0x00], // ñ
            0xA5 => [0xFC, 0x00, 0xCC, 0xEC, 0xFC, 0xDC, 0xCC, 0x00], // Ñ
            0xA6 => [0x3C, 0x6C, 0x6C, 0x3E, 0x00, 0x7E, 0x00, 0x00], // ª
            0xA7 => [0x38, 0x6C, 0x6C, 0x38, 0x00, 0x7C, 0x00, 0x00], // º
            0xA8 => [0x30, 0x00, 0x30, 0x60, 0xC0, 0xCC, 0x78, 0x00], // ¿
            0xA9 => [0x00, 0x00, 0x00, 0xFC, 0xC0, 0xC0, 0x00, 0x00], // ⌐
            0xAA => [0x00, 0x00, 0x00, 0xFC, 0x0C, 0x0C, 0x00, 0x00], // ¬
            0xAB => [0xC3, 0xC6, 0xCC, 0xDE, 0x33, 0x66, 0xCC, 0x0F], // ½
            0xAC => [0xC3, 0xC6, 0xCC, 0xDB, 0x37, 0x6F, 0xCF, 0x03], // ¼
            0xAD => [0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x18, 0x00], // ¡
            0xAE => [0x00, 0x33, 0x66, 0xCC, 0x66, 0x33, 0x00, 0x00], // «
            0xAF => [0x00, 0xCC, 0x66, 0x33, 0x66, 0xCC, 0x00, 0x00], // »

            // 0xB0-0xBF: Shading and box drawing
            0xB0 => [0x55, 0xAA, 0x55, 0xAA, 0x55, 0xAA, 0x55, 0xAA], // ░
            0xB1 => [0xAA, 0x55, 0xAA, 0x55, 0xAA, 0x55, 0xAA, 0x55], // ▒
            0xB2 => [0xDD, 0x77, 0xDD, 0x77, 0xDD, 0x77, 0xDD, 0x77], // ▓
            0xB3 => [0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18], // │
            0xB4 => [0x18, 0x18, 0x18, 0x18, 0xF8, 0x18, 0x18, 0x18], // ┤
            0xB5 => [0x18, 0x18, 0xF8, 0x18, 0xF8, 0x18, 0x18, 0x18], // ╡
            0xB6 => [0x36, 0x36, 0x36, 0x36, 0xF6, 0x36, 0x36, 0x36], // ╢
            0xB7 => [0x00, 0x00, 0x00, 0x00, 0xFE, 0x36, 0x36, 0x36], // ╖
            0xB8 => [0x00, 0x00, 0xF8, 0x18, 0xF8, 0x18, 0x18, 0x18], // ╕
            0xB9 => [0x36, 0x36, 0xF6, 0x06, 0xF6, 0x36, 0x36, 0x36], // ╣
            0xBA => [0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36], // ║
            0xBB => [0x00, 0x00, 0xFE, 0x06, 0xF6, 0x36, 0x36, 0x36], // ╗
            0xBC => [0x36, 0x36, 0xF6, 0x06, 0xFE, 0x00, 0x00, 0x00], // ╝
            0xBD => [0x36, 0x36, 0x36, 0x36, 0xFE, 0x00, 0x00, 0x00], // ╜
            0xBE => [0x18, 0x18, 0xF8, 0x18, 0xF8, 0x00, 0x00, 0x00], // ╛
            0xBF => [0x00, 0x00, 0x00, 0x00, 0xF8, 0x18, 0x18, 0x18], // ┐

            // 0xC0-0xCF: More box drawing
            0xC0 => [0x18, 0x18, 0x18, 0x18, 0x1F, 0x00, 0x00, 0x00], // └
            0xC1 => [0x18, 0x18, 0x18, 0x18, 0xFF, 0x00, 0x00, 0x00], // ┴
            0xC2 => [0x00, 0x00, 0x00, 0x00, 0xFF, 0x18, 0x18, 0x18], // ┬
            0xC3 => [0x18, 0x18, 0x18, 0x18, 0x1F, 0x18, 0x18, 0x18], // ├
            0xC4 => [0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00], // ─
            0xC5 => [0x18, 0x18, 0x18, 0x18, 0xFF, 0x18, 0x18, 0x18], // ┼
            0xC6 => [0x18, 0x18, 0x1F, 0x18, 0x1F, 0x18, 0x18, 0x18], // ╞
            0xC7 => [0x36, 0x36, 0x36, 0x36, 0x37, 0x36, 0x36, 0x36], // ╟
            0xC8 => [0x36, 0x36, 0x37, 0x30, 0x3F, 0x00, 0x00, 0x00], // ╚
            0xC9 => [0x00, 0x00, 0x3F, 0x30, 0x37, 0x36, 0x36, 0x36], // ╔
            0xCA => [0x36, 0x36, 0xF7, 0x00, 0xFF, 0x00, 0x00, 0x00], // ╩
            0xCB => [0x00, 0x00, 0xFF, 0x00, 0xF7, 0x36, 0x36, 0x36], // ╦
            0xCC => [0x36, 0x36, 0x37, 0x30, 0x37, 0x36, 0x36, 0x36], // ╠
            0xCD => [0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00], // ═
            0xCE => [0x36, 0x36, 0xF7, 0x00, 0xF7, 0x36, 0x36, 0x36], // ╬
            0xCF => [0x18, 0x18, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00], // ╧

            // 0xD0-0xDF: More box drawing and blocks
            0xD0 => [0x36, 0x36, 0x36, 0x36, 0xFF, 0x00, 0x00, 0x00], // ╨
            0xD1 => [0x00, 0x00, 0xFF, 0x00, 0xFF, 0x18, 0x18, 0x18], // ╤
            0xD2 => [0x00, 0x00, 0x00, 0x00, 0xFF, 0x36, 0x36, 0x36], // ╥
            0xD3 => [0x36, 0x36, 0x36, 0x36, 0x3F, 0x00, 0x00, 0x00], // ╙
            0xD4 => [0x18, 0x18, 0x1F, 0x18, 0x1F, 0x00, 0x00, 0x00], // ╘
            0xD5 => [0x00, 0x00, 0x1F, 0x18, 0x1F, 0x18, 0x18, 0x18], // ╒
            0xD6 => [0x00, 0x00, 0x00, 0x00, 0x3F, 0x36, 0x36, 0x36], // ╓
            0xD7 => [0x36, 0x36, 0x36, 0x36, 0xFF, 0x36, 0x36, 0x36], // ╫
            0xD8 => [0x18, 0x18, 0xFF, 0x18, 0xFF, 0x18, 0x18, 0x18], // ╪
            0xD9 => [0x18, 0x18, 0x18, 0x18, 0xF8, 0x00, 0x00, 0x00], // ┘
            0xDA => [0x00, 0x00, 0x00, 0x00, 0x1F, 0x18, 0x18, 0x18], // ┌
            0xDB => [0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF], // █
            0xDC => [0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF], // ▄
            0xDD => [0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0], // ▌
            0xDE => [0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F], // ▐
            0xDF => [0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00], // ▀

            // 0xE0-0xEF: Greek letters and math symbols
            0xE0 => [0x00, 0x00, 0x76, 0xDC, 0xC8, 0xDC, 0x76, 0x00], // α
            0xE1 => [0x00, 0x78, 0xCC, 0xF8, 0xCC, 0xF8, 0xC0, 0xC0], // ß
            0xE2 => [0x00, 0xFC, 0xCC, 0xC0, 0xC0, 0xC0, 0xC0, 0x00], // Γ
            0xE3 => [0x00, 0xFE, 0x6C, 0x6C, 0x6C, 0x6C, 0x6C, 0x00], // π
            0xE4 => [0xFC, 0xCC, 0x60, 0x30, 0x60, 0xCC, 0xFC, 0x00], // Σ
            0xE5 => [0x00, 0x00, 0x7E, 0xD8, 0xD8, 0xD8, 0x70, 0x00], // σ
            0xE6 => [0x00, 0x66, 0x66, 0x66, 0x66, 0x7C, 0x60, 0xC0], // µ
            0xE7 => [0x00, 0x76, 0xDC, 0x18, 0x18, 0x18, 0x18, 0x00], // τ
            0xE8 => [0xFC, 0x30, 0x78, 0xCC, 0xCC, 0x78, 0x30, 0xFC], // Φ
            0xE9 => [0x38, 0x6C, 0xC6, 0xFE, 0xC6, 0x6C, 0x38, 0x00], // Θ
            0xEA => [0x38, 0x6C, 0xC6, 0xC6, 0x6C, 0x6C, 0xEE, 0x00], // Ω
            0xEB => [0x1C, 0x30, 0x18, 0x7C, 0xCC, 0xCC, 0x78, 0x00], // δ
            0xEC => [0x00, 0x00, 0x7E, 0xDB, 0xDB, 0x7E, 0x00, 0x00], // ∞
            0xED => [0x06, 0x0C, 0x7E, 0xDB, 0xDB, 0x7E, 0x60, 0xC0], // φ
            0xEE => [0x38, 0x60, 0xC0, 0xF8, 0xC0, 0x60, 0x38, 0x00], // ε
            0xEF => [0x78, 0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0x00], // ∩

            // 0xF0-0xFF: Math symbols and special characters
            0xF0 => [0x00, 0xFC, 0x00, 0xFC, 0x00, 0xFC, 0x00, 0x00], // ≡
            0xF1 => [0x30, 0x30, 0xFC, 0x30, 0x30, 0x00, 0xFC, 0x00], // ±
            0xF2 => [0x60, 0x30, 0x18, 0x30, 0x60, 0x00, 0xFC, 0x00], // ≥
            0xF3 => [0x18, 0x30, 0x60, 0x30, 0x18, 0x00, 0xFC, 0x00], // ≤
            0xF4 => [0x0E, 0x1B, 0x1B, 0x18, 0x18, 0x18, 0x18, 0x18], // ⌠
            0xF5 => [0x18, 0x18, 0x18, 0x18, 0xD8, 0xD8, 0x70, 0x00], // ⌡
            0xF6 => [0x30, 0x30, 0x00, 0xFC, 0x00, 0x30, 0x30, 0x00], // ÷
            0xF7 => [0x00, 0x76, 0xDC, 0x00, 0x76, 0xDC, 0x00, 0x00], // ≈
            0xF8 => [0x38, 0x6C, 0x6C, 0x38, 0x00, 0x00, 0x00, 0x00], // °
            0xF9 => [0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00], // ∙
            0xFA => [0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00], // ·
            0xFB => [0x0F, 0x0C, 0x0C, 0x0C, 0xEC, 0x6C, 0x3C, 0x1C], // √
            0xFC => [0x78, 0x6C, 0x6C, 0x6C, 0x6C, 0x00, 0x00, 0x00], // ⁿ
            0xFD => [0x70, 0x18, 0x30, 0x60, 0x78, 0x00, 0x00, 0x00], // ²
            0xFE => [0x00, 0x00, 0x3C, 0x3C, 0x3C, 0x3C, 0x00, 0x00], // ■
            0xFF => [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], // (nbsp)
        ];
    }

    public static function charWidth(): int
    {
        return 8;
    }

    public static function charHeight(): int
    {
        return 8;
    }
}
